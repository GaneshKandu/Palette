function palette(e){html=getHTMLOfSelection(),UpdateHTML("<"+e+">"+html+"</"+e+">")}function palette(e,t){html=getHTMLOfSelection(),UpdateHTML("none"!==t?"<"+e+">"+html+"</"+t+">":"<"+e+"/>")}function offset(e){for(grid='	<div class="row cells'+e+'" >\n',i=1;i<=e;i++)grid+='		<div class="cell">'+i+"</div>\n";grid+="	</div>\n",UpdateHTML(grid)}function addrow(){var e=getgrid();grid='\n<div class="grid">\n',grid+='	<div class="row cells12" >\n';for(var t=0;t<e.length;t++)grid+='		<div class="cell colspan'+e[t]+' ">'+(t+1)+"</div>\n";grid+="	</div>\n",grid+="</div>\n",UpdateHTML(grid)}function palette_save(e,t,o){html=document.getElementById("cont").innerHTML,$.post(t+"/projects/save",{html:html,project:e},function(e,t){"success"===e?$.Notify({type:"success",caption:"Info",content:"Saved Successfully"}):$.Notify({type:"warning",caption:"Warning",content:"Unsuccessfull"})})}function palette_color(){html=getHTMLOfSelection(),colorvalue=document.getElementById("jscolor").value,UpdateHTML('<span style="color:#'+colorvalue+';">'+html+"</span>")}function setForegroundColor(){html=getHTMLOfSelection(),colorvalue=document.getElementById("jscolor").value,UpdateHTML('<span style="background-color:#'+colorvalue+';">'+html+"</span>")}function palatte_add_image_url(){return html="",result=prompt("Enter Image URL: ",""),null===result?!0:void(""===result?echo.alert("Not Enterd any URL"):(html+='<img src="'+result+'" style="width:200px;height:200px;" />',UpdateHTML(html)))}function display_images(){"none"===$("#img_exp").css("display")?$("#img_exp").css("display","block"):$("#img_exp").css("display","none")}function palatte_add_image(e){html="",html+='<img src="'+e+'" style="width:400px;height:400px;" />',$("#img_exp").css("display","none"),UpdateHTML(html)}function palatte_add_anchor(){return linkurl=prompt("Enter URL: ",""),display=prompt("URL Display: ",""),null===display?!0:void(""===display?echo.alert("Not Enterd any Anchor"):UpdateHTML('<a href="'+linkurl+'" >'+display+"</a>"))}function _palatte_add_anchor(){var e=new Object;e.head="Add Anchor",e.inputs=["Enter URL","Enter Name to Display URL"],echo.prompt(e).click(function(){var e=palette_popup_values();__palatte_add_anchor(e[0],e[1])})}function __palatte_add_anchor(e,t){""===t?echo.alert("Not Enterd any Anchor"):UpdateHTML('<a href="'+e+'" >'+t+"</a>")}function palatte_add_table(){if(Column=prompt("Enter No of Column",""),Rows=prompt("Enter No of Rows",""),""===Rows||null===Rows)return echo.alert("Not Enterd any No of Rows"),!1;if(""===Column||null===Column)return echo.alert("Not Enterd any No of Column"),!1;for(table='<table style="width:400px;height:400px;" >',k=1,table+="<tr>",j=0;j<Column;j++)table+="<th>",table+=k++,table+="</th>";for(table+="</tr>",i=1;i<Rows;i++){for(table+="<tr>",j=0;j<Column;j++)table+="<td>",table+=k++,table+="</td>";table+="</tr>"}table+="</table>",UpdateHTML(table)}function palette_youtube(){return youtube_link=prompt("Enter HTML Code",""),""===youtube_link||null===youtube_link?(echo.alert("Not Enterd Any HTML Code"),!1):void UpdateHTML('<div class="video-container">'+youtube_link+"</div>")}function getSelectionText(){var e="";return window.getSelection&&(stext=window.getSelection(),oRange=stext.getRangeAt(0),oRect=oRange.getBoundingClientRect(),e=stext.toString()),e}function UpdateHTML(e){var t,e;if(window.getSelection&&window.getSelection().getRangeAt){t=window.getSelection().getRangeAt(0),t.deleteContents();var o=document.createElement("div");o.innerHTML=e;for(var n,a=document.createDocumentFragment();n=o.firstChild;)a.appendChild(n);t.insertNode(a)}else document.selection&&document.selection.createRange&&(t=document.selection.createRange(),t.pasteHTML(e))}function getHTMLOfSelection(){var e;if(document.selection&&document.selection.createRange)return e=document.selection.createRange(),e.htmlText;if(window.getSelection){var t=window.getSelection();if(t.rangeCount>0){e=t.getRangeAt(0);var o=e.cloneContents(),n=document.createElement("div");return n.appendChild(o),n.innerHTML}return""}return""}function _drag_init(e){selected=e,x_elem=x_pos-selected.offsetLeft,y_elem=y_pos-selected.offsetTop}function _move_elem(e){x_pos=document.all?window.event.clientX:e.pageX,y_pos=document.all?window.event.clientY:e.pageY,null!==selected&&(selected.style.left=x_pos-x_elem+"px",selected.style.top=y_pos-y_elem+"px")}function _destroy(){selected=null}function getgrid(){debug=!1;for(var e="",t=Array(),o=0,n=1;13>n;n++)for(var a=1;13>a;a++)e=$("#"+n+"_"+a+":checked").val(),void 0!==e&&(t[o++]=e);var l=Array();for(n=o=1,a=0,n=0;12>n;n++)t[n]===t[n+1]?o++:(l[a]=o,o=1,a++);return l}function cons(){return cons="///////////////////////////////////////////////////\n",cons+="Palatte CMS is a PHP Based Site Builder.\n",cons+="Developed By : Ganesh Kandu\n",cons+="Contact Mail : kanduganesh@gmail.com\n",cons+="///////////////////////////////////////////////////\n",cons+="                     .:/++/:.                     \n",cons+="                ./yddyo+//oymNs.          .dy`    \n",cons+="             -omdo-          -hN/        :NMMN/   \n",cons+="          `+dd+`     `/os/`    oM/      oMMMMMMs  \n",cons+="        `oNy-       /Ns:/sN:    dN     yNsMMMMMMs \n",cons+="       oNs.        .Mo   `Ms    +M-   oM//MMMMMMM`\n",cons+="     -mh.          .Ny:/smy`    sM.   MM.oMMMMMMN`\n",cons+="    oN/    ./+/`    `+oo/`     :My    yMNNMMMMMm- \n",cons+="   ym.    /MMMMN.             /Ms      -oNmdmd:   \n",cons+="  sm`     hMMMMM-            +M/         m: oh    \n",cons+=" :M-      .dMMm+            -M+          N- /d    \n",cons+=" dy         ``              .Nho:        M+:ym    \n",cons+=".M:    `+yyo`                 ./sdy-     MMMMN    \n",cons+="/M`   `mMMMMh                     :dy    MMMMN    \n",cons+="/M`   :MMMMM+                      `m+   mMMMM    \n",cons+=".M:    :syo-                       `N+   dMMMM    \n",cons+=" sd`          `sdh+               :my    hMMMM    \n",cons+="  hh`        `mMMMMs            :hm/     sMMMM    \n",cons+="   om/        mMMMm-         -smy:       /MMMM    \n",cons+="    .yd+`      -:.       ./ydy/`         `MMMd    \n",cons+="      `/yhs+:.`  `.-:+shhs/.              dMMo    \n",cons+="          .:+osyyyyso/-                   /MN`    \n",cons+="                                           y-     \n",cons+="                                                  \n"}function object_resize(e){return html="",html+='\n<div class="resizable" style="cursor: text;">\n	',html+=e,html+='\n	<div class="ui-resizable-handle ui-resizable-nw"></div>\n',html+='	<div class="ui-resizable-handle ui-resizable-ne"></div>\n',html+='	<div class="ui-resizable-handle ui-resizable-sw"></div>\n',html+='	<div class="ui-resizable-handle ui-resizable-se"></div>\n',html+='	<div class="ui-resizable-handle ui-resizable-n"></div>\n',html+='	<div class="ui-resizable-handle ui-resizable-s"></div>\n',html+='	<div class="ui-resizable-handle ui-resizable-e"></div>\n',html+='	<div class="ui-resizable-handle ui-resizable-w"></div>\n',html+="</div>",html}function dropValueToInput(e,t){$("#slider_input").val(e)}function palatte_contex_close(){$("#palatte_contex").css("display","none")}function create_contex_menu(e,t,o,n){html="",html+='<li class="menu-title">'+e+"</li>";for(var a=0;a<t.length;a++)html+='<li><a href="javascript:void(0)" onclick="'+n[a]+';palatte_contex_close();" ><span class="'+t[a]+' icon"></span>'+o[a]+"</a></li>";return html+='<li><a href="javascript:void(0)" onclick="palatte_contex_close();" ><span class="mif-cross icon"></span>Close</a></li>',html}function setImage(e){void 0!==palette_global_var?("function"==typeof palette_global_var.css?palette_global_var.css("background-image",'url("'+e+'")'):palatte_add_image(e),palette_global_var=void 0):palatte_add_image(e),$("#img_exp").css("display","none")}function setBackground(){display_images()}function setBackgroundTD_URL(){palette_global_var=palette_global_var.find("td"),setBackground_URL()}function setBackgroundTH_URL(){palette_global_var=palette_global_var.find("th"),setBackground_URL()}function setBackground_URL(){result=prompt("Enter Background Image URL: ",""),""===result||null===result?echo.alert("Not Enterd any URL"):(result='url("'+result+'")',palette_global_var.css("background-image",result))}function setBackgroundColor(){colorvalue="#"+document.getElementById("jscolor").value,palette_global_var.css("background-color",colorvalue)}function setTextColor(){colorvalue="#"+document.getElementById("jscolor").value,palette_global_var.css("color",colorvalue)}function setBorder(){colorvalue="#"+document.getElementById("jscolor").value,border_type=$("input:radio[name=radio_palette_border]:checked").val(),palette_global_var.css("border-style",border_type),palette_global_var.css("border-color",colorvalue)}function setImageBorder(){colorvalue="#"+document.getElementById("jscolor").value,pixel=document.getElementById("slider_input").value,border_type=$("input:radio[name=radio_palette_border]:checked").val(),palette_global_var.css("border",pixel+"px "+border_type+" "+colorvalue)}function setTableBorder(){colorvalue="#"+document.getElementById("jscolor").value,pixel=document.getElementById("slider_input").value,border_type=$("input:radio[name=radio_palette_border]:checked").val(),palette_global_var.css("border",pixel+"px "+border_type+" "+colorvalue)}function setTableTextColor(){setTextColor()}function setThBorder(){palette_global_var=palette_global_var.find("th"),setTableBorder()}function setThBackgroundImage(){palette_global_var=palette_global_var.find("th"),setBackground()}function setThBackgroundColor(){palette_global_var=palette_global_var.find("th"),setBackgroundColor()}function setThTextColor(){palette_global_var=palette_global_var.find("th"),setTextColor()}function setTdBorder(){palette_global_var=palette_global_var.find("td"),setTableBorder()}function setTdBackgroundImage(){palette_global_var=palette_global_var.find("td"),setBackground()}function setTdBackgroundColor(){palette_global_var=palette_global_var.find("td"),setBackgroundColor()}function setTdTextColor(){palette_global_var=palette_global_var.find("td"),setTextColor()}function setFontSize(){html=getHTMLOfSelection(),pixel=document.getElementById("slider_input").value,UpdateHTML('<span style="font-size:'+pixel+'px;" >'+html+"</span>")}var echo=new Object,Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,o,n,a,l,r,i,s="",c=0;for(e=Base64._utf8_encode(e);c<e.length;)t=e.charCodeAt(c++),o=e.charCodeAt(c++),n=e.charCodeAt(c++),a=t>>2,l=(3&t)<<4|o>>4,r=(15&o)<<2|n>>6,i=63&n,isNaN(o)?r=i=64:isNaN(n)&&(i=64),s=s+this._keyStr.charAt(a)+this._keyStr.charAt(l)+this._keyStr.charAt(r)+this._keyStr.charAt(i);return s},decode:function(e){var t,o,n,a,l,r,i,s="",c=0;for(e=e.replace(/[^A-Za-z0-9+\/=]/g,"");c<e.length;)a=this._keyStr.indexOf(e.charAt(c++)),l=this._keyStr.indexOf(e.charAt(c++)),r=this._keyStr.indexOf(e.charAt(c++)),i=this._keyStr.indexOf(e.charAt(c++)),t=a<<2|l>>4,o=(15&l)<<4|r>>2,n=(3&r)<<6|i,s+=String.fromCharCode(t),64!==r&&(s+=String.fromCharCode(o)),64!==i&&(s+=String.fromCharCode(n));return s=Base64._utf8_decode(s)},_utf8_encode:function(e){e=e.replace(/rn/g,"n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",o=0,n=c1=c2=0;o<e.length;)n=e.charCodeAt(o),128>n?(t+=String.fromCharCode(n),o++):n>191&&224>n?(c2=e.charCodeAt(o+1),t+=String.fromCharCode((31&n)<<6|63&c2),o+=2):(c2=e.charCodeAt(o+1),c3=e.charCodeAt(o+2),t+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),o+=3);return t}};document.execCommand("enableObjectResizing",!1,!1),$(document).ready(function(){document.oncontextmenu=function(){return!1}});var debug=!1,image_1d9e7fa2ed9f534ca43575172ec5ef25=new Object,palette_global_var=new Object;console.info(cons());var selected=null,x_pos=0,y_pos=0,x_elem=0,y_elem=0;document.getElementById("tool-box").onmousedown=function(){return _drag_init(this),!1},document.onmousemove=_move_elem,document.onmouseup=_destroy,$(function(){var e,t,o=!1,n=["#ffffff","#ff5c33","#ff4d94","#6666ff","#00ffff","#ccffcc","#33ff88","#ff5c88","#ff4d88","#666688","#00ff88","#ccff88","#33ff33"];$("#our_table td").mousedown(function(){o=!0,e=$(this).attr("box"),t=e;var a=document.getElementById(e+"_"+t);return null!==a&&(a.checked=!0),$(this).css("background-color",n[e]),!1}).mouseover(function(){o&&(t=$(this).attr("box"),document.getElementById(e+"_"+t).checked=!0,$(this).css("background-color",n[e]))}),$(document).mouseup(function(){o=!1})}),$(".resizable").resizable({handles:{nw:".ui-resizable-nw",ne:".ui-resizable-ne",sw:".ui-resizable-sw",se:".ui-resizable-se",n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w"}}),$(".resizable").on("resize",function(e){var t=$(this).width(),o=$(this).height();$(this).find("table").css("width",t),$(this).find("table").css("height",o)}),$(".draggable").draggable().on("click",function(){$(this).is(".ui-draggable-dragging")||($(this).draggable("option","disabled",!0),$(this).css("cursor","text"))}).on("blur",function(){$(this).draggable("option","disabled",!1),$(this).prop("contenteditable","false"),$(this).css("cursor","move")}),$(document).on("dblclick","img",function(){var e=$(this).width(),t=$(this).height(),o=$(this).offset(),n=o.left,a=o.top;$(".resizable").css("display","block"),$(".resizable").css("width",e+5),$(".resizable").css("height",t+5),$(".resizable").css("left",n),$(".resizable").css("top",a),image_1d9e7fa2ed9f534ca43575172ec5ef25=$(this)}),$(document).on("dblclick","table",function(){var e=$(this).width(),t=$(this).height(),o=$(this).offset(),n=o.left,a=o.top;$(".resizable").css("display","block"),$(".resizable").css("width",e+5),$(".resizable").css("height",t+5),$(".resizable").css("left",n),$(".resizable").css("top",a),image_1d9e7fa2ed9f534ca43575172ec5ef25=$(this)}),$(".resizable").dblclick(function(){$(this).css("display","none"),$(this).prop("contenteditable","false")}),$(".resizable").on("resize",function(e){var t=$(this).width(),o=$(this).height();image_1d9e7fa2ed9f534ca43575172ec5ef25.css("width",t),image_1d9e7fa2ed9f534ca43575172ec5ef25.css("height",o);var n=image_1d9e7fa2ed9f534ca43575172ec5ef25.offset(),a=n.left,l=n.top;$(this).css("left",a),$(this).css("top",l)}),$(function(){$(document.body).bind("mouseup",function(e){var t;window.getSelection?t=window.getSelection():document.selection&&(t=document.selection.createRange())})}),$("#close_button").click(function(){$("#dialog-shadow").css("display","none")}),$(".grid").bind("mousedown",function(e){if(2===e.button){var t=$("#palatte_contex"),o=getSelectionText();if(palette_global_var=$(this),""!==o)var n="Selected Text Menu",a=["mif-palette","mif-palette",""],l=["Set Background Color","Set Foreground Color","Set Font Size"],r=["setForegroundColor()","palette_color()","setFontSize()"];else var n="Grid Menu",a=["mif-image","mif-image","mif-palette","mif-stack2"],l=["Set Background Image","Set Background Image URL","Set Background Color","Set Border"],r=["setBackground()","setBackground_URL()","setBackgroundColor()","setBorder()"];var i=create_contex_menu(n,a,l,r);return t.html(i),t.css("display","block"),t.css("top",e.pageY),t.css("left",e.pageX),!1}return!0}),$("img").bind("mousedown",function(e){if(2===e.button){var t=$("#palatte_contex");palette_global_var=$(this);var o="Image Menu",n=["mif-stack2"],a=["Set Border"],l=["setImageBorder()"],r=create_contex_menu(o,n,a,l);return t.html(r),t.css("display","block"),t.css("top",e.pageY),t.css("left",e.pageX),!1}return!0}),$("tbody").bind("mousedown",function(e){if(2===e.button){palette_global_var=$(this);var t=getSelectionText(),o=$("#palatte_contex");if(""===t)var n="Table Menu",a=["mif-stack2","mif-image","mif-image","mif-palette","mif-palette","mif-stack2","mif-image","mif-image","mif-palette","mif-palette","mif-stack2","mif-image","mif-image","mif-palette","mif-palette"],l=["Table Border","Table Background Image","Table Background Image URL","Table Background Color","Table Text Color","Heading Border","Heading Background Image","Heading Background Image URL","Heading Background Color","Heading Text Color","Body Border","Body Background Image","Body Background Image URL","Body Background Color","Body Text Color"],r=["setTableBorder()","setBackground()","setBackground_URL()","setBackgroundColor()","setTableTextColor()","setThBorder()","setThBackgroundImage()","setBackgroundTH_URL()","setThBackgroundColor()","setThTextColor()","setTdBorder()","setTdBackgroundImage()","setBackgroundTD_URL()","setTdBackgroundColor()","setTdTextColor()"];else var n="Selected Text Menu",a=["mif-palette","mif-palette",""],l=["Set Background Color","Set Foreground Color","Set Font Size"],r=["setForegroundColor()","palette_color()","setFontSize()"];var i=create_contex_menu(n,a,l,r);return o.html(i),o.css("display","block"),o.css("top",e.pageY),o.css("left",e.pageX),!1}return!0}),$("#palatte_contex").focusout(function(){$(this).css("display","none")}).mouseleave(function(){$(this).css("display","none")});